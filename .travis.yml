dist: xenial   # required for Python >= 3.7

language: python

python:
  - "3.7"

notifications:
  email:
    recipients:
      - paul.bavazzano@gmail.com
      - elkhantache.ismael@gmail.com
      - ceuterickx.gaetan@gmail.com
    on_success: always
    on_failure: always

script: pytest

before_install:
  - pip install Cython
  - pip install -r requirements.txt

before_deploy:
  - pip install wheel
  - pip install twine
  - python setup.py sdist bdist_wheel
  - twine upload --repository-url https://test.pypi.org/legacy/ dist/*

deploy:
  provider: pypi
  server: https://testpypi.python.org/pypi
  user: "$TWINE_USERNAME"
  password: "$TWINE_PASSWORD"
  distributions: "bdist_wheel"
